# performance_monitor

性能监控 sdk 设计

### 1. 功能规划

- 页面加载性能：包括 DNS 查询时间、TCP 连接时间、请求发送到服务器的时间、响应接收时间等。
- 资源加载情况：统计 CSS、JavaScript 文件及图片等资源的加载时间。
- 首屏渲染时间：首次内容绘制(FCP)、最大内容绘制(LCP)、首次输入延迟(FID)
- 用户交互延迟：测量从用户触发事件（点击、滚动）到页面做出反应之间的时间差。
- 数据上报机制：收集上述信息并通过 HTTP 请求等方式发送给后端服务进行分析。

### 2、SDK 设计

1、数据收集模块

- 收集各种性能指标，利用浏览器提供的性能 api, 如 PerformanceObserver、Navigation Timing API、Resource Time API 等

2、数据处理模块

- 对收集到的数据进行整理和分析，如计算平均加载时间，最大请求响应时间等统计数据

- 可以根据需求对数据进行分类和筛选，更好的了解不同类型资源或操作的性能情况

3、数据上报/存储模块

- 将处理后的数据上报和存储起来，方便后续分析和报告

4、报告生成模块

- 依据存储的数据生成性能报告，可以多种形式呈现，如 HTML/JSON 等
- 可以通过邮件/群机器人定期推送数据

5、配置模块

- 允许用户配置 sdk 的行为，如选择要检测的指标，设置采样频率等。
